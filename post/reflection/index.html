<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <link rel="alternate" hreflang="en-us" href="https://sulmanolieko.github.io/post/reflection">
  <meta name="theme-color" content="#795548">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">
  <link href="css/pattern.min.css" rel="stylesheet">
  <!--Google Webfonts-->
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/css/academic.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-MDK8S5X2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    function trackOutboundLink(url) {
      gtag('event', 'click', {
        'event_category': 'outbound',
        'event_label': url,
        'transport_type': 'beacon',
        'event_callback': function () {
          document.location = url;
        }
      });
      console.debug("Outbound link clicked: " + url);
    }

    function onClickCallback(event) {
      if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
        return;
      }
      trackOutboundLink(event.target);
    }

    gtag('js', new Date());
    gtag('config', 'GTM-MDK8S5X2', {});

    document.addEventListener('click', onClickCallback, false);
  </script>

  <link rel="alternate" href="/post/index.xml" type="application/rss+xml" title="Sulman Olieko">
  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">
  <link rel="canonical" href="https://sulmanolieko.github.io/post/reflection">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Sulman Olieko">
  <meta property="og:url" content="https://sulmanolieko.github.io/post/ReflectionProblem">
  <meta property="og:title" content="Reflection problem in Econometrics | Sulman Olieko">
  <meta property="og:description" content="An exposition and exploration of the reflection problem in econometrics and its implications for identifying peer effects.">
  <meta property="og:image" content="https://sulmanolieko.github.io/img/icon-192.png">
  <meta property="og:locale" content="en-uk">
  <meta property="og:updated_time" content="2025-10-06T00:00:00+00:00">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://sulmanolieko.github.io/post/reflection">
  <meta property="twitter:title" content="Reflection problem in Econometrics | Sulman Olieko">
  <meta property="twitter:description" content="An exposition and exploration of the reflection problem in econometrics and its implications for identifying peer effects.">
  <meta property="twitter:image" content="https://sulmanolieko.github.io/img/icon-192.png">

  <!-- MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Prism Syntax Highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">

  <title>Reflection Problem in Econometrics | Sulman Olieko</title>

  <style>
    /* Mimic the default <small> style */
    .small-text {
      font-size: 80%;
    }
  </style>
</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents">

  <aside class="search-results" id="search">
    <div class="container">
      <section class="search-header">

        <div class="row no-gutters justify-content-between mb-3">
          <div class="col-6">
            <h1>Search</h1>
          </div>
          <div class="col-6 col-search-close">
            <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
          </div>
        </div>

        <div id="search-box">

          <input name="q" id="search-query" placeholder="Search..." autocapitalize="off" autocomplete="on" autocorrect="on" spellcheck="true" type="search">

        </div>

      </section>
      <section class="section-search-results">

        <div id="search-hits">
        </div>

      </section>
    </div>
  </aside>

  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container">
      <a class="navbar-brand" href="/index">
        <img src="/img/ekonly-logo.svg" alt="Ekonly Logo" style="height: 40px;">
      </a>
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>

      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        <ul class="navbar-nav d-md-inline-flex">
          <li class="nav-item">
            <a class="nav-link" href="/index.html" data-target="/index.html"><span>Homepage</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/publication/index.html" data-target="/publication/index.html"><span>Publications</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/post/index.html" data-target="/post/index.html"><span>Blogs</span></a>
          </li>
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
        <li class="nav-item">
          <a class="nav-link" href="/cv/#viewer"><strong>CV</strong><i aria-hidden="true"></i></a>
      </li>
        <li class="nav-item">
          <a class="nav-link" href="mailto:oliekosulman@gmail.com"><i class="fas fa-envelope fa-1x" aria-hidden="true"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>

        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>

      </ul>

    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mt-5 pt-5">
    <article class="p-4 p-md-5 h-100 card-transparent media-body card-body">
      <!-- Breadcrumb -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/index.html" aria-label="Home"><i class="fa fa-home" aria-hidden="true"></i></a></li>
          <li class="breadcrumb-item"><a href="/post/">Blogs</a></li>
          <li class="breadcrumb-item active" aria-current="page">Reflection problem</li>
        </ol>
      </nav>

      <header class="mb-5">
        <h2 class="h3 mb-3">The Reflection Problem in Econometrics</h2>
        <div class="d-flex align-items-center text-muted">
          <!-- Tags -->
          <div class="d-flex">
            <button class="btn btn-outline-primary btn-sm me-2">Econometrics</button>
            <span class="middot-divider mx-2">•</span>
            <button class="btn btn-outline-primary btn-sm">Social Interactions</button>
          </div>
        </div>
      </header>

      <!--Takeaway-->
        <section class="mb-5">
          <div class="small-text">
            <strong>Summary of Key Takeaways</strong>
            <hr>
            <ul>
              <li>The reflection problem highlights the difficulty of disentangling an individual’s effect on the group from the group’s effect on the individual.</li>
              <li>Naive OLS regressions that include group averages are often underidentified unless additional assumptions or exogenous variations are introduced.</li>
              <li>Strategies such as exclusion restrictions, instrumental variables, random group assignment, and network analysis can help mitigate the issue.</li>
              <li>Misinterpreting group correlations as peer effects can lead to flawed policy recommendations.</li>
              <li>Further research integrating richer data sources and experimental designs may improve our ability to identify genuine peer effects.</li>
            </ul>
          </div>
        </section>

      <!-- Featured Image -->
      <figure class="figure mb-5">
        <img src="/img/reflection.webp" class="figure-img img-fluid rounded" style="width: 400px; height: 400px; align: center" alt="AI image">
        <figcaption class="figure-caption text-center mt-2">
          <span class="small-text">Fig 1: AI-generated image illustrating social interactions.</span>
        </figcaption>
      </figure>
      
      <!-- Article Content -->
      <div class="article-content">
        <section class="mb-5">
          <div class="small-text">
            <strong>Introduction</strong>
            <hr>
            <p>
              In various social and economic contexts, individuals often adapt their decisions and outlooks in response to group norms and the behaviour of their peers. This tendency is commonly termed “peer effects” or “endogenous social effects.” While it is intuitive to observe that a household’s decisions about, say, resource allocation or schooling may be shaped by neighbours or colleagues, understanding the precise channels of influence can be much more complex. At the heart of this complexity is the <em>reflection problem</em>, a term I find useful in explaining why it is often challenging to distinguish between the influence peers exert on an individual and the parallel influence that the individual’s traits might have on their peers and environment.
            </p>
            <p>
              This article provides a structured exploration of the reflection problem, emphasising how it arises and why it remains a persistent issue in econometric research. Drawing upon existing scholarship in social interactions and peer effects, I illustrate how underidentification can easily occur if one attempts to measure the impact of group averages on individual outcomes without introducing additional assumptions or well-chosen instruments. In practical terms, this challenge has direct implications for how researchers and policymakers design interventions, interpret correlations, and assess the likely efficacy of group-based policy strategies. By the end, I hope to highlight both the magnitude of the reflection problem and the pathways through which it can be mitigated.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Historical Context and Conceptual Foundations</strong>
            <hr>
            <p>
              The notion that people’s outcomes are interlinked is not new. Scholars in sociology, anthropology, and economics have long recognised that social norms, group pressures, and community contexts play pivotal roles in shaping individual behaviour. Early sociological works placed great emphasis on social structures, while economists historically favoured models centred on individual rational choice. Over time, however, there has been a growing appreciation that ignoring social dynamics can lead to incomplete explanations of economic and social phenomena.
            </p>
            <p>
              Charles F. Manski’s (1993) seminal paper on the reflection problem crystallised the challenge of empirically measuring peer effects. He argued that when one attempts to regress an individual’s outcome on the average outcome of their group, one faces a conundrum: how do we know if the group’s average outcome is truly influencing the individual, or if it merely reflects the aggregation of individual outcomes—potentially including that of the individual in question? Additionally, how do we separate the effect of group-level attributes (contextual effects) from genuine spillovers (endogenous effects)? The reflection problem is thus at the heart of distinguishing between correlation and causation in social interactions.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Basic Model Setup</strong>
            <hr>
            <p>
              A common way to formalise peer effects is through a linear model. Suppose \(y_i\) is the outcome for individual \(i\) in group \(g\). Let \(\bar{y}_g\) denote the group’s average outcome, \(\bar{z}_g\) the group’s average characteristics, and \(z_i\) the individual’s own characteristics. A simple specification is:
            </p>
            <p>
              \( y_i = \alpha + \beta \bar{y}_g + \gamma \bar{z}_g + \delta z_i + \epsilon_i. \)
            </p>
            <p>
              Here, \(\beta\) captures the endogenous peer effect, \(\gamma\) captures the contextual or exogenous group effect, and \(\delta\) measures how much individual attributes directly affect the outcome. At first glance, this model seems straightforward. However, the challenge arises because \(\bar{y}_g\) is itself a function of the outcomes \(y_j\) for all individuals \(j\in g\), including \(y_i\). This simultaneity means that a naive regression of \(y_i\) on \(\bar{y}_g\) risks conflating the individual’s effect on the group with the group’s effect on the individual.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>The Reflection Problem Explained</strong>
            <hr>
            <p>
              The reflection problem arises because group outcomes and individual outcomes often mirror each other. If you aggregate the model across the group, you get:
            </p>
            <p>
              \( \bar{y}_g = \frac{1}{N_g} \sum_{j \in g} y_j. \)
            </p>
            <p>
              Substituting each \(y_j\) from the individual-level equation into \(\bar{y}_g\) introduces a circularity: \(\bar{y}_g\) appears on both sides of the equation, entangling the roles of \(\beta\), \(\gamma\), and \(\delta\). After solving for \(\bar{y}_g\) and plugging it back into the individual equation, you typically end up with a reduced form that reveals you can only identify certain linear combinations of the parameters, not each one independently. This is the essence of underidentification.
            </p>
            <p>
              In more intuitive terms, if the average group outcome is partly driven by each individual’s outcome, it is not clear whether changes in the group outcome cause changes in the individual or vice versa. This simultaneity is precisely what Manski highlights. Without additional information or constraints, one cannot simply look at a correlation between an individual’s outcome and the group’s outcome and conclude that peer influence is at work.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Underidentification and Its Consequences</strong>
            <hr>
            <p>
              Econometric identification is about whether one can isolate unique values for parameters of interest from the data. In the reflection problem, there are three structural parameters—\(\beta\), \(\gamma\), and \(\delta\)—but fewer degrees of freedom in the reduced form, leading to underidentification. Consequently, naive OLS regressions that include \(\bar{y}_g\) as an explanatory variable risk mixing up these effects, resulting in biased or inconsistent estimates.
            </p>
            <p>
              This underidentification matters greatly in practice. Suppose you observe that in a certain region, both the group average outcome and individual outcomes are high. One might be tempted to attribute this to strong peer effects. However, it could be that the region simply has superior infrastructure or a well-designed policy environment that raises everyone’s outcome, creating an illusion of peer influence. If policymakers interpret this correlation as evidence of strong peer effects and design interventions accordingly, they may be disappointed when those interventions fail to replicate the observed outcomes in other contexts.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Potential Approaches to Overcoming the Reflection Problem</strong>
            <hr>
            <p>
              As Manski (1993) and subsequent researchers have noted, solving the reflection problem typically requires additional structure or data. Below are some of the most common strategies:
            </p>
            <ol>
              <li><em>Exclusion Restrictions:</em> One might assume that certain variables do not appear in the individual’s own outcome equation, or that individual-level characteristics do not enter into the group outcome equation. For instance, setting \(\delta=0\) can help disentangle the parameters. However, such assumptions must be well justified and may not always be realistic.</li>
              <li><em>Instrumental Variables (IV):</em> Another approach is to find variables that influence \(\bar{y}_g\) but are exogenous to \(y_i\). If a credible instrument can be identified—perhaps a policy that randomly assigns resources to certain groups but not others—this exogenous variation can help isolate the true effect of the group outcome on the individual. The difficulty lies in identifying a strong and valid instrument that meets the necessary exogeneity criteria.</li>
              <li><em>Random Group Assignment:</em> In some controlled experiments, individuals are randomly assigned to groups. If the composition of groups is random, then variations in \(\bar{y}_g\) can be seen as exogenous to individual traits. This strategy is often employed in educational research where students are randomly assigned to dormitories or classrooms, making it easier to attribute differences in individual outcomes to the group environment rather than self-selection.</li>
              <li><em>Network Analysis:</em> Instead of treating an entire class or neighbourhood as a single group, one might exploit detailed data on who interacts with whom. By mapping out social networks, researchers can attempt to identify exogenous changes in specific ties, potentially overcoming some of the reflection problem’s confounding factors.</li>
            </ol>
            <p>
              Each of these methods has strengths and weaknesses. Exclusion restrictions may be too strong; finding valid instruments can be difficult; random assignment is not always feasible; and network data may not be available. Nonetheless, these strategies highlight the creativity researchers have applied to circumvent underidentification.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Alternative Strategies and Empirical Illustrations</strong>
            <hr>
            <p>
              Beyond these classical approaches, partial population experiments and quasi-experimental designs also show promise. In some public health interventions, for instance, only a fraction of individuals in a community receive a treatment. By comparing treated and untreated individuals within the same environment, one can sometimes tease out whether changes in the group outcome truly cause changes in individual outcomes.
            </p>
            <p>
              Empirical examples abound. In education, random assignment to roommates has been used to study how peer academic performance affects individual grades. In labour economics, the employment status of neighbours has been investigated to see if it influences an individual’s job search behaviour. In health, researchers have explored whether obesity or smoking “spread” within social networks. In each of these contexts, the reflection problem can obscure the distinction between genuine peer influence and correlated environmental factors unless carefully addressed.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Why It Remains Difficult</strong>
            <hr>
            <p>
              The reflection problem persists because social interactions are inherently bidirectional: people influence their peers, who in turn influence them back. This mutual causation can look like a mirror, reflecting each individual’s behaviour in the collective outcome. Without an exogenous shock, random assignment, or strong assumptions, we cannot easily separate who is influencing whom.
            </p>
            <p>
              Moreover, group formation is often endogenous. Individuals may select into certain schools, neighbourhoods, or social circles based on unobserved traits, further complicating identification. If the same unobserved trait drives both group membership and outcomes, naive analysis will confound peer effects with selection effects. A randomised approach or a natural experiment can mitigate this problem but is rarely available outside controlled settings.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Advanced Econometric Solutions</strong>
            <hr>
            <p>
              In response to these challenges, more advanced econometric techniques have emerged. Some researchers employ simultaneous equations models that explicitly account for the fact that \(y_i\) and \(\bar{y}_g\) are determined together. Others use Bayesian hierarchical models or structural approaches that specify the nature of social interactions more precisely. While these methods can be powerful, they often require detailed data and rely on assumptions that might not always hold in real-world settings.
            </p>
            <p>
              Another promising direction involves leveraging big data and network science. If one has a granular map of social ties, one might detect exogenous changes in certain parts of the network and observe how they ripple through connections. However, collecting and analysing such data can be resource-intensive and may raise privacy concerns.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Policy Implications</strong>
            <hr>
            <p>
              Accurately identifying peer effects is not just an academic exercise; it has profound policy implications. In education, policymakers often group students in hopes of boosting performance through peer influence. In agriculture, interventions may rely on “lead farmers” to demonstrate new techniques, expecting the rest of the group to follow. In public health, partial vaccinations or community health drives may hinge on the assumption that those who benefit will encourage others to do the same. If peer effects are overestimated due to the reflection problem, these policies may yield disappointing results. Conversely, if peer effects are underestimated, we may miss opportunities for collective interventions that leverage social influence effectively.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Critical Evaluations and Ongoing Debates</strong>
            <hr>
            <p>
              Some critics argue that while the reflection problem is conceptually significant, in practice, partial or natural experiments often exist that can shed light on genuine peer effects. Others contend that many observed correlations in group data might be spurious unless one can fully account for all relevant confounders. This debate underscores the tension between the complexity of real-world social interactions and the simplifying assumptions often required for tractable econometric models.
            </p>
            <p>
              Ultimately, the reflection problem remains a useful reminder that correlation—especially within social groups—does not automatically imply causation. It pushes researchers to be more rigorous in their identification strategies, either by designing experiments that circumvent simultaneity or by applying robust econometric methods that can separate endogenous effects from contextual and correlated factors.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Examples of Reflection Across Different Contexts</strong>
            <hr>
            <ul>
              <li><em>Workplace Productivity:</em> In an open-plan office, it may look like employees influence one another’s productivity, but a high-performing office may simply reflect strong organisational culture or management practices.</li>
              <li><em>Adolescent Behaviour:</em> Teenagers might appear to emulate their peers’ choices regarding substance use, but they may also be responding to the same environmental factors, such as community norms or family background.</li>
              <li><em>Technology Adoption:</em> People often adopt new gadgets or platforms if they see friends doing so, yet the group’s high adoption rate might reflect shared demographic traits rather than genuine social contagion.</li>
            </ul>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Practical Steps for Empirical Researchers</strong>
            <hr>
            <ol>
              <li><em>Examine Group Formation:</em> Determine whether group membership is random, policy-driven, or self-selected. Understanding how groups form can reveal potential sources of bias.</li>
              <li><em>Look for Exogenous Variation:</em> Seek out natural experiments, policy changes, or random assignment that create variation in group averages unrelated to individual traits.</li>
              <li><em>Consider Instrumental Variables:</em> Identify plausible instruments that shift \(\bar{y}_g\) but do not directly affect \(y_i\). Evaluate the validity of these instruments rigorously.</li>
              <li><em>Use Network Data if Possible:</em> Detailed network information can help pinpoint which peers truly matter and how influence propagates through social ties.</li>
              <li><em>Conduct Robustness Checks:</em> Try different specifications, subsamples, and control variables to ensure results are not driven by unobserved confounders.</li>
            </ol>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Ongoing Challenges and Future Directions</strong>
            <hr>
            <p>
              Despite methodological advances, the reflection problem remains a central concern in social science research. With more detailed datasets and computational methods, we are better equipped than ever to tackle complex interactions. Yet, the fundamental simultaneity at the core of peer effects means that perfect identification may remain elusive unless the data or experimental design is particularly fortuitous.
            </p>
            <p>
              Future research may focus on integrating machine learning techniques with traditional econometrics, exploring how large-scale network data can be harnessed to tease out exogenous shocks. Additionally, more interdisciplinary work that combines economic models with sociological or psychological insights could lead to richer theories of how individuals and groups mutually shape each other’s behaviour.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>Conclusion</strong>
            <hr>
            <p>
              The reflection problem stands as a powerful reminder that correlation does not imply causation, especially in social contexts where people shape and are shaped by their peers. While Manski’s original articulation focused on the theoretical challenge of underidentification, decades of subsequent research have confirmed the practical difficulties of pinning down peer effects without strong assumptions or exogenous variation. Nonetheless, the importance of peer influence in fields as diverse as education, health, and agriculture means that overcoming the reflection problem is vital for both academic research and effective policy design.
            </p>
            <p>
              Researchers can take heart that numerous creative solutions—ranging from carefully chosen exclusion restrictions to randomised experiments—have proven successful in many cases. Even so, caution is warranted whenever strong claims about peer effects are made without credible identification strategies. By remaining mindful of the reflection problem and its implications, economists and other social scientists can continue refining our understanding of how group dynamics inform individual choices, ultimately leading to more nuanced and impactful interventions.
            </p>
          </div>
        </section>

        <section class="mb-5">
          <div class="small-text">
            <strong>References</strong>
            <hr>
            <p>
              Manski, C. F. (1993). “Identification of Endogenous Social Effects: The Reflection Problem.” <em>Review of Economic Studies</em>, 60(3), 531–542.<br>
              Brock, W. A., & Durlauf, S. N. (2001). “Discrete Choice with Social Interactions.” <em>Review of Economic Studies</em>, 68(2), 235–260.<br>
              Sacerdote, B. (2001). “Peer Effects in Education: Evidence from College Roommates.” <em>Quarterly Journal of Economics</em>, 116(2), 681–704.<br>
              Angrist, J. D., & Pischke, J.-S. (2009). <em>Mostly Harmless Econometrics</em>. Princeton University Press.
            </p>
          </div>
        </section>

        <section>
          <div class="d-flex align-items-center text-muted">
            <!-- Author Image -->
            <img src="/authors/admin/home_avatar.png" alt="Sulman Olieko" class="rounded-circle me-2" width="40" height="40">

            <!-- Author Details and Metadata -->
            <div class="d-flex flex-column ms-2">
              <!-- Author Name and Date -->
              <div class="d-flex align-items-center mb-2">
                <span class="me-2"><span class="small-text">Sulman Olieko</span></span>
                <span class="middot-divider mx-2">•</span>
                <time datetime="2025-02-14" class="text-small"><span class="small-text">February 14, 2025</span></time>
              </div>

            </div>
          </div>
        </section>
      </div>
    </article>

    <!-- Archive -->
    <div class="row">
      <div class="col-md-6">
        <div class="note-box badge-light">
          <div class="d-flex align-items-center">
            <!-- Text Content -->
            <div class="flex-grow-1">
              <h5 class="h5 card-title">Previous Post</h5>
              <p class="card-text">
                <span class="small-text">
                  <a href="/post/magic_bullet/" style="font-weight: bold;">
                    Why There is No “Magic Bullet” for Causal Inference using Observational Data
                  </a>
                </span>
              </p>
            </div>
            <!-- Linked Image -->
            <div class="ms-4">
              <a href="/post/magic_bullet/">
                <img src="/img/magic_bullet.webp" alt="AI image" style="width: 200px; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <style>
    .floating {
      position: fixed;
      width: 60px;
      height: 60px;
      bottom: 40px;
      right: 40px;
      background-color: #795548;
      color: #FFF;
      border-radius: 50px;
      text-align: center;
      font-size: 30px;
      z-index: 100;
    }

    .float-button {
      margin-top: 16px;
    }
  </style>

  <a href="https://api.whatsapp.com/send?phone=+254710209720&text=Hello!%20I%20came%20across%20your%20website%20and%20would%20like%20to%20learn%20more%20about%20your%20services.%20Can%20you%20please%20assist%20me%3F" class="floating" target="_blank">
    <i class="fab fa-whatsapp float-button"></i>
  </a>

  <style>
    .scroll-button {
      position: fixed;
      bottom: 50px;
      right: 15px;
      background: #795548;
      color: white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      min-width: 40px;
      min-height: 40px;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2em;
      cursor: pointer;
      border: none;
      outline: none;
      z-index: 999;
      transition: transform 0.3s;
    }

    .scroll-button:hover {
      transform: scale(1.1);
    }

    .scroll-icon {
      line-height: 1;
      margin-top: -2px;
      /* Optical alignment adjustment */
    }
  </style>

  <button class="scroll-button" id="scrollButton">
    <span class="scroll-icon">⌄</span>
  </button>

  <script>
    const scrollButton = document.getElementById('scrollButton');

    function toggleScroll() {
      const scrolledToBottom = window.innerHeight + window.scrollY >=
        document.documentElement.scrollHeight - 50;

      window.scrollTo({
        top: scrolledToBottom ? 0 : document.documentElement.scrollHeight,
        behavior: 'smooth'
      });
    }

    window.addEventListener('scroll', () => {
      const scrolledToBottom = window.innerHeight + window.scrollY >=
        document.documentElement.scrollHeight - 50;
      scrollButton.querySelector('.scroll-icon').textContent =
        scrolledToBottom ? '⌃' : '⌄';
    });

    scrollButton.addEventListener('click', toggleScroll);
  </script>

  <style>
    .code-container {
      position: relative;
      margin: 1rem 0;
      background: #1e1e1e;
      border-radius: 8px;
      padding: 2rem 1rem 1rem;
      color: #d4d4d4;
      font-family: 'Fira Code', monospace;
      overflow-x: auto;
    }

    pre:has(code) {
      position: relative;
      margin: 5px 0;
      padding: 1.75rem 0 1.75rem 1rem;
    }

    pre:has(code) button {
      position: absolute;
      top: 5px;
      right: 5px;
    }

    /* The copy-button is now small and shows an icon */
    .copy-button {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 24px;
      height: 24px;
      background: #3a3a3a;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease;
      padding: 0;
    }

    .copy-button svg {
      width: 16px;
      height: 16px;
      fill: #fff;
    }

    .copy-button:hover {
      background: #4a4a4a;
    }

    .copy-button:active {
      background: #2a2a2a;
    }

    .copy-button--success {
      background: #4CAF50 !important;
    }

    code[class*="language-"] {
      white-space: pre-wrap;
      overflow-wrap: break-word;
      display: block;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>

  <script>
    (function () {
      'use strict';

      const copyButtonTimeout = 2000;

      document.querySelectorAll('pre:has(code)').forEach(codeBlock => {
        if (!navigator.clipboard) return;

        const container = codeBlock.closest('pre');
        if (!container || container.querySelector('.copy-button')) return;

        container.classList.add('code-container');

        const button = document.createElement('button');
        button.className = 'copy-button';
        button.type = 'button';
        // Use an inline SVG for the copy icon and include a screen-reader only label.
        button.innerHTML = `
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M19,21H8C6.9,21,6,20.1,6,19V7H8V19H19V21ZM16,3H5C3.9,3,3,3.9,3,5V17H5V5H16V3Z"/>
          </svg>
          <span class="sr-only">Copy code to clipboard</span>
        `;

        button.addEventListener('click', async () => {
          try {
            const code = container.querySelector('code').textContent;
            await navigator.clipboard.writeText(code);

            button.classList.add('copy-button--success');
            // Optionally update the sr-only text for confirmation.
            button.querySelector('.sr-only').textContent = 'Copied!';

            setTimeout(() => {
              button.classList.remove('copy-button--success');
              button.querySelector('.sr-only').textContent = 'Copy code to clipboard';
            }, copyButtonTimeout);
          } catch (err) {
            button.querySelector('.sr-only').textContent = 'Error copying';
            console.error('Failed to copy!', err);
          }
        });

        container.prepend(button);
        container.setAttribute('tabindex', '0');
      });
    })();
  </script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>

  <script>const code_highlighting = true;</script>
  <script>
    const search_config = {
      "indexURI": "/index.json",
      "minLength": 1,
      "threshold": 0.3
    };
    const i18n = {
      "no_results": "No results found",
      "placeholder": "Search...",
      "results": "results found"
    };
    const content_type = {
      'post': "Posts",
      'project': "Projects",
      'publication': "Publications",
      'talk': "Talks"
    };
  </script>
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
  <script src="/js/academic.min.bcfae8267aba63cc55af53a503896bd9.js"></script>
  <!-- Footer -->
  <div class="container">
    <footer class="site-footer">
      <p class="powered-by">
        <a href="https://sulmanolieko.github.io/privacy/">Privacy Policy</a>
        &middot;
        <a href="https://sulmanolieko.github.io/terms/">Terms</a>
      </p>
      <div class="share-box" aria-hidden="true">
        <ul class="share">
          <li>
            <a href="https://www.linkedin.com/in/olieko-sulman" target="_blank" rel="noopener" class="share-btn-linkedin">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/olieko_sulman" target="_blank" rel="noopener" class="share-btn-twitter">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a href="https://api.whatsapp.com/send?phone=+254710209720&text=Hello!%20I%20came%20across%20your%20website%20and%20would%20like%20to%20learn%20more%20about%20your%20services.%20Can%20you%20please%20assist%20me%3F" target="_blank" rel="noopener" class="share-btn-whatsapp">
              <i class="fab fa-whatsapp"></i>
            </a>
          </li>
          <li>
            <a href="mailto:oliekosulman@gmail.com" target="_blank" rel="noopener" class="share-btn-email">
              <i class="fas fa-envelope"></i>
            </a>
          </li>

          <li>
            <a href="https://service.weibo.com/olieko_sulman" target="_blank" rel="noopener" class="share-btn-weibo">
              <i class="fab fa-weibo"></i>
            </a>
          </li>
        </ul>
      </div>
      <p class="powered-by copyright-license-text">
        This work is licensed under
        <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">
          CC BY NC ND 4.0
        </a>
      </p>
      <p class="powered-by footer-license-icons">
        <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
          <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
          <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
          <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
          <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
        </a>
      </p>
    </footer>

  </div>
</body>

</html>
